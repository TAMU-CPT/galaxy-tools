<?xml version="1.0"?>
<tool id="FirstIndex" name="First Index of AAs" version="1.94">
  <description>for an input GBK file</description>
  <version_command>perl bin/cpt_first_appearance_of_aa.pl --version</version_command>
  <stdio>
    <exit_code range="1:" level="fatal"/>
  </stdio>
  <command interpreter="perl">bin/cpt_first_appearance_of_aa.pl
--galaxy
--outfile_supporting $__new_file_path__
--file "${file}"

--tag "${tag}"

#if $normalize:
--normalize
#end if

--report "${report}"

--report_files_path "${report.files_path}"

--report_format "${report_format}"

--report_id "${report.id}"

</command>
  <inputs>
    <param name="file" help="Input file" optional="False" label="file" type="data"/>
    <param value="CDS" name="tag" help="Analyse by a&#10;&#9;&#9;&#9;specific tag" optional="False" label="tag" type="select">
      <option value="-10_signal">-10_signal</option>
      <option value="-35_signal">-35_signal</option>
      <option value="3'UTR">3'UTR</option>
      <option value="5'UTR">5'UTR</option>
      <option value="CAAT_signal">CAAT_signal</option>
      <option value="CDS" selected="True">CDS</option>
      <option value="C_region">C_region</option>
      <option value="D-loop">D-loop</option>
      <option value="D_segment">D_segment</option>
      <option value="GC_signal">GC_signal</option>
      <option value="J_segment">J_segment</option>
      <option value="LTR">LTR</option>
      <option value="N_region">N_region</option>
      <option value="RBS">RBS</option>
      <option value="STS">STS</option>
      <option value="S_region">S_region</option>
      <option value="TATA_signal">TATA_signal</option>
      <option value="V_region">V_region</option>
      <option value="V_segment">V_segment</option>
      <option value="all">all</option>
      <option value="assembly_gap">assembly_gap</option>
      <option value="attenuator">attenuator</option>
      <option value="enhancer">enhancer</option>
      <option value="exon">exon</option>
      <option value="gap">gap</option>
      <option value="gene">gene</option>
      <option value="iDNA">iDNA</option>
      <option value="intron">intron</option>
      <option value="mRNA">mRNA</option>
      <option value="mat_peptide">mat_peptide</option>
      <option value="misc_RNA">misc_RNA</option>
      <option value="misc_binding">misc_binding</option>
      <option value="misc_difference">misc_difference</option>
      <option value="misc_feature">misc_feature</option>
      <option value="misc_recomb">misc_recomb</option>
      <option value="misc_signal">misc_signal</option>
      <option value="misc_structure">misc_structure</option>
      <option value="mobile_element">mobile_element</option>
      <option value="modified_base">modified_base</option>
      <option value="ncRNA">ncRNA</option>
      <option value="old_sequence">old_sequence</option>
      <option value="operon">operon</option>
      <option value="oriT">oriT</option>
      <option value="polyA_signal">polyA_signal</option>
      <option value="polyA_site">polyA_site</option>
      <option value="precursor_RNA">precursor_RNA</option>
      <option value="prim_transcript">prim_transcript</option>
      <option value="primer_bind">primer_bind</option>
      <option value="promoter">promoter</option>
      <option value="protein_bind">protein_bind</option>
      <option value="rRNA">rRNA</option>
      <option value="rep_origin">rep_origin</option>
      <option value="repeat_region">repeat_region</option>
      <option value="sig_peptide">sig_peptide</option>
      <option value="source">source</option>
      <option value="stem_loop">stem_loop</option>
      <option value="tRNA">tRNA</option>
      <option value="terminator">terminator</option>
      <option value="tmRNA">tmRNA</option>
      <option value="transit_peptide">transit_peptide</option>
      <option value="unsure">unsure</option>
      <option value="variation">variation</option>
      <option value="whole">whole</option>
    </param>
    <param name="normalize" falsevalue="False" optional="True" truevalue="True" checked="" help="Normalize all indices over the length of the sequence" type="boolean" label="normalize"/>
    <param name="report_format" help="First index of AAs" optional="False" label="Format of report" type="select">
      <option value="CSV" selected="True">CSV</option>
      <option value="CSV_U">CSV_U</option>
      <option value="Dumper">Dumper</option>
      <option value="JSON">JSON</option>
      <option value="ODS">ODS</option>
      <option value="TSV">TSV</option>
      <option value="TSV_U">TSV_U</option>
      <option value="XLS">XLS</option>
      <option value="XLSX">XLSX</option>
      <option value="YAML">YAML</option>
    </param>
  </inputs>
  <outputs>
    <data name="report" format="CSV">
      <change_format>
        <when input="report_format" value="CSV" format="tabular"/>
        <when input="report_format" value="CSV_U" format="tabular"/>
        <when input="report_format" value="Dumper" format="txt"/>
        <when input="report_format" value="JSON" format="txt"/>
        <when input="report_format" value="ODS" format="data"/>
        <when input="report_format" value="TSV" format="tabular"/>
        <when input="report_format" value="TSV_U" format="tabular"/>
        <when input="report_format" value="XLS" format="data"/>
        <when input="report_format" value="XLSX" format="data"/>
        <when input="report_format" value="YAML" format="txt"/>
      </change_format>
    </data>
  </outputs>
  <help>DESCRIPTION
===========

This tool produces a table of the first time it encounters each amino
acid (known to the tool) in each sequence. This data can be
automatically normalized if that is an appropriate transform for your
data.
</help>
  <tests>
    <test>
      <param name="file" value="test-data/inputs/multi.gbk"/>
      <param name="tag" value="CDS"/>
      <output name="report" file="test-data/outputs/firstindex.default.csv"/>
    </test>
    <test>
      <param name="file" value="test-data/inputs/multi.cds.fa"/>
      <param name="tag" value="CDS"/>
      <output name="report" file="test-data/outputs/firstindex.fa.csv"/>
    </test>
    <test>
      <param name="file" value="test-data/inputs/multi.gbk"/>
      <param name="normalize" value=""/>
      <param name="tag" value="CDS"/>
      <output name="report" file="test-data/outputs/firstindex.norm.csv"/>
    </test>
  </tests>
</tool>
