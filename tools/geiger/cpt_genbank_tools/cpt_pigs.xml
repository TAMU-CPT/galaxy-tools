<?xml version="1.0"?>
<tool id="PIGS" name="PIGS" version="1.94">
  <description>calculates sum length of intergenic regions as a percentage of the genome</description>
  <version_command>perl bin/cpt_pigs.pl --version</version_command>
  <stdio>
    <exit_code range="1:" level="fatal"/>
  </stdio>
  <command interpreter="perl">bin/cpt_pigs.pl
--galaxy
--outfile_supporting $__new_file_path__
--file "${file}"

--results "${results}"

--results_files_path "${results.files_path}"

--results_format "${results_format}"

--results_id "${results.id}"

</command>
  <inputs>
    <param name="file" help="Input file" optional="False" label="file" type="data"/>
    <param name="results_format" help="PIGS Results" optional="False" label="Format of results" type="select">
      <option value="CSV" selected="True">CSV</option>
      <option value="CSV_U">CSV_U</option>
      <option value="Dumper">Dumper</option>
      <option value="JSON">JSON</option>
      <option value="ODS">ODS</option>
      <option value="TSV">TSV</option>
      <option value="TSV_U">TSV_U</option>
      <option value="XLS">XLS</option>
      <option value="XLSX">XLSX</option>
      <option value="YAML">YAML</option>
    </param>
  </inputs>
  <outputs>
    <data name="results" format="CSV">
      <change_format>
        <when input="results_format" value="CSV" format="tabular"/>
        <when input="results_format" value="CSV_U" format="tabular"/>
        <when input="results_format" value="Dumper" format="txt"/>
        <when input="results_format" value="JSON" format="txt"/>
        <when input="results_format" value="ODS" format="data"/>
        <when input="results_format" value="TSV" format="tabular"/>
        <when input="results_format" value="TSV_U" format="tabular"/>
        <when input="results_format" value="XLS" format="data"/>
        <when input="results_format" value="XLSX" format="data"/>
        <when input="results_format" value="YAML" format="txt"/>
      </change_format>
    </data>
  </outputs>
  <help>NAME
====

PIGS

DESCRIPTION
===========

Determines percent of intergenic sequence relative to the whole genome.
This script was intended to complement the other method for calculating
coding density.

There are two methods of calculating coding density:

-  ``( sum of lengths of all coding sequences ) / ( length of genome )``
-  ``( sum of lengths of regions without coding sequences ) / ( length of genome )``

the CPT favors the second method as it more accurately reflects the
portion of the genome that is not covered in genes. This is relevant as
phages have very high coding densities, and a high PIGS score indicates
there may be a region which is missing a gene.
</help>
  <tests>
    <test>
      <param name="file" value="test-data/inputs/multi.gbk"/>
      <output name="results" file="test-data/outputs/pigs.csv"/>
    </test>
  </tests>
</tool>
