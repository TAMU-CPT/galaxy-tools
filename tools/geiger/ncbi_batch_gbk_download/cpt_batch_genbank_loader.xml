<?xml version="1.0"?>
<tool id="Batch_GBK_Downloader" name="Batch Genbank Downloader" version="1.94">
  <description>Downloads genbank files from Genbank's servers</description>
  <version_command>perl bin/cpt_batch_genbank_loader.pl --version</version_command>
  <stdio>
    <exit_code range="1:" level="fatal"/>
  </stdio>
  <command interpreter="perl">bin/cpt_batch_genbank_loader.pl
--galaxy
--outfile_supporting $__new_file_path__
#for $item in $repeat_accession:
--accession "${item.accession}"
#end for

#if $accession_file:
--accession_file $accession_file
#end if

#if $split:
--split
#end if

--genbank "${genbank}"

--genbank_files_path "${genbank.files_path}"

--genbank_format "${genbank_format}"

--genbank_id "${genbank.id}"

</command>
  <inputs>
    <repeat name="repeat_accession" title="Accession">
      <param name="accession" help="Accession Number(s) to download. May be separated by space/comma/newline, or specified multiple times" optional="False" label="accession" type="text"/>
    </repeat>
    <param value="" help="Accession File" name="accession_file" label="accession_file" type="data" optional="True"/>
    <param name="split" falsevalue="False" optional="True" truevalue="True" checked="" help="If multiple files are downloaded, should they be split" type="boolean" label="split"/>
    <param name="genbank_format" help="Output Genbank Files" optional="False" label="Format of genbank" type="select">
      <option value="ABI">ABI</option>
      <option value="AGAVE">AGAVE</option>
      <option value="ALF">ALF</option>
      <option value="Ace">Ace</option>
      <option value="AsciiTree">AsciiTree</option>
      <option value="BSML">BSML</option>
      <option value="BSML_SAX">BSML_SAX</option>
      <option value="CTF">CTF</option>
      <option value="ChadoXML">ChadoXML</option>
      <option value="Chaos">Chaos</option>
      <option value="ChaosXML">ChaosXML</option>
      <option value="EMBL">EMBL</option>
      <option value="EntrezGene">EntrezGene</option>
      <option value="Excel">Excel</option>
      <option value="Exp">Exp</option>
      <option value="Fasta">Fasta</option>
      <option value="Fastq">Fastq</option>
      <option value="GAME">GAME</option>
      <option value="GCG">GCG</option>
      <option value="Genbank" selected="True">Genbank</option>
      <option value="Interpro">Interpro</option>
      <option value="KEGG">KEGG</option>
      <option value="LargeFasta">LargeFasta</option>
      <option value="LaserGene">LaserGene</option>
      <option value="LocusLink">LocusLink</option>
      <option value="PHD">PHD</option>
      <option value="PIR">PIR</option>
      <option value="PLN">PLN</option>
      <option value="Qual">Qual</option>
      <option value="Raw">Raw</option>
      <option value="SCF">SCF</option>
      <option value="SeqXML">SeqXML</option>
      <option value="Strider">Strider</option>
      <option value="Swiss">Swiss</option>
      <option value="TIGR">TIGR</option>
      <option value="TIGRXML">TIGRXML</option>
      <option value="Tab">Tab</option>
      <option value="TinySeq">TinySeq</option>
      <option value="ZTR">ZTR</option>
    </param>
  </inputs>
  <outputs>
    <data name="genbank" format="Genbank">
      <change_format>
        <when input="genbank_format" value="ABI" format="data"/>
        <when input="genbank_format" value="AGAVE" format="xml"/>
        <when input="genbank_format" value="ALF" format=""/>
        <when input="genbank_format" value="Ace" format="txt"/>
        <when input="genbank_format" value="AsciiTree" format="txt"/>
        <when input="genbank_format" value="BSML" format="xml"/>
        <when input="genbank_format" value="BSML_SAX" format="xml"/>
        <when input="genbank_format" value="CTF" format="data"/>
        <when input="genbank_format" value="ChadoXML" format="xml"/>
        <when input="genbank_format" value="Chaos" format="xml"/>
        <when input="genbank_format" value="ChaosXML" format="xml"/>
        <when input="genbank_format" value="EMBL" format="txt"/>
        <when input="genbank_format" value="EntrezGene" format="txt"/>
        <when input="genbank_format" value="Excel" format="data"/>
        <when input="genbank_format" value="Exp" format="txt"/>
        <when input="genbank_format" value="Fasta" format="fasta"/>
        <when input="genbank_format" value="Fastq" format="fastq"/>
        <when input="genbank_format" value="GAME" format="xml"/>
        <when input="genbank_format" value="GCG" format="txt"/>
        <when input="genbank_format" value="Genbank" format="txt"/>
        <when input="genbank_format" value="Interpro" format="xml"/>
        <when input="genbank_format" value="KEGG" format="txt"/>
        <when input="genbank_format" value="LargeFasta" format="txt"/>
        <when input="genbank_format" value="LaserGene" format="data"/>
        <when input="genbank_format" value="LocusLink" format="data"/>
        <when input="genbank_format" value="PHD" format="data"/>
        <when input="genbank_format" value="PIR" format="data"/>
        <when input="genbank_format" value="PLN" format="data"/>
        <when input="genbank_format" value="Qual" format="data"/>
        <when input="genbank_format" value="Raw" format="txt"/>
        <when input="genbank_format" value="SCF" format="data"/>
        <when input="genbank_format" value="SeqXML" format="xml"/>
        <when input="genbank_format" value="Strider" format="data"/>
        <when input="genbank_format" value="Swiss" format="txt"/>
        <when input="genbank_format" value="TIGR" format="xml"/>
        <when input="genbank_format" value="TIGRXML" format="xml"/>
        <when input="genbank_format" value="Tab" format="tabular"/>
        <when input="genbank_format" value="TinySeq" format="xml"/>
        <when input="genbank_format" value="ZTR" format="data"/>
      </change_format>
    </data>
  </outputs>
  <help>NAME
====

Batch Genbank Downloader

DESCRIPTION
===========

Allows for downloading of multiple genbank files from NCBI by accession
numbers. This script produces a single genbank file with all of your
records concatenated, which is allowed per specification.

Please note that it is unlikely CPT scripts in genbank will behave
nicely with this sort of input (most are written around reading
standalone genbank files). As of now (2014-03) I am working on fixing
this from both ends: a script to split genbank files, and better handing
of genbank database.
</help>
  <tests/>
</tool>
