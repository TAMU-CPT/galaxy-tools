<tool id="edu.tamu.cpt.sar.sar_finder" name="SAR Finder" version="1.0">
    <description>SAR Domain Finder</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements">
    </expand>
    <command detect_errors="aggressive"><![CDATA[
python $__tool_directory__/SAR_finder.py
$fa
--strand $strand
--min_size $min_size
--max_size $max_size
--lipo_min_start $lipo_min_start
--lipo_max_start $lipo_max_start
--min_lipo_after $min_lipo_after
--max_lipo_after $max_lipo_after
--regex_pattern $regex_pattern
--tmd_min_start $tmd_min_start
--tmd_max_start $tmd_max_start
--tmd_min_size $tmd_min_size
--tmd_max_size $tmd_max_size
--putative_usp_gff $putative_usp_gff
--summary_usp_txt $summary_usp_txt
--putative_usp $putative_usp
--usp_og $usp_og
--usp_ob $usp_ob
--usp_op $usp_op
--usp_on $usp_on
--switch $switch
    ]]></command>
    <inputs>
        <param label="FASTA" name="fasta_file" type="data" format="fasta" />
        <param type="select" label="Strand Choice" name="strand">
            <option value="both">both</option>
            <option value="forward">+</option>
            <option value="reverse">-</option>
        </param>
        <param label="u-spanin minimal length" name=""/>
        <param label="u-spanin maximum length" name=""/>
        <param label="Range Selection; default is all; slices are based on NT. Separated by a colon (eg. #:#)" name=""/>
        <param label="TMD minimal distance from start codon" name=""/>
        <param label="TMD maximum distance from start codon" name=""/>
        <param label="TMD minimal size" name=""/>
        <param label="TMD maximum size" name=""/>
        <param label="Lipobox minimal distance from start codon" name=""/>
        <param label="Lipobox maximum distance from start codon" name=""/>
        <param label="Minimum amount of periplasmic residues after Lipobox" name=""/>
        <param label="Maximum amount of periplasmic residues after Lipobox" name=""/>
        <param label="Regular Expression" type="select" name="">
            <option value="1">[ILMFTV][^REKD][GAS]C</option>
            <option value="2">[ACGSILMFTV][^REKD][GAS]C</option>
        </param> 
    </inputs>
    <outputs>
        <data format="fasta" name="usp_on" label="NucSequences.fa" hidden = "true"/>
        <data format="fasta" name="usp_op" label="ProtSequences.fa" hidden = "true"/>
        <data format="bed" name="usp_ob" label="BED_Output.bed" hidden = "true"/>
        <data format="gff3" name="usp_og" label="GFF_Output.gff" hidden = "true"/>
        <data format="fasta" name="putative_usp" label="putative_usp.fa"/>
        <data format="txt" name="summary_usp" label="summary_usp.txt"/>
        <data format="gff3" name="putative_usp_gff" label="putative_usp.gff3"/>
    </outputs>
        <tests>
            <test>
            </test>
        </tests>
    <help><![CDATA[
A tool that analyzes protein sequence within the first 50 residues for a weakly hydrophobic domain sometimes found in endolysins called Signal-Anchor-Release (aka SAR)

Definition: A Signal-Arrest-Release (SAR) domain is a N-terminal, weakly hydrophobic transmembrane region rich is Gly/Ala and/or Ser residues sometimes found in phage lysis proteins, including endolysins and holins. The SAR domain can be released from the membrane in a proton motive force-dependent manner.
This tool finds proteins that contain a stretch (default 15-20 residues) of hydrophobic residues (Ile, Leu, Val, Phe, Tyr, Trp, Met, Gly, Ala, Ser) and calculates the % Gly/Ala/Ser/Thr residues in the hydrophobic stretch. The net charge on the N-terminal region is also dusplayed to aid in determining the SAR topology.[1]

INPUT : Protein Multi FASTA

OUTPUT : 

* Multi FASTA of candidate proteins that pass the SAR domain criteria

* Text summary file containing each protein that passes the SAR domain criteria

* Multi GFF3

    ]]></help>
    <citations>
        <citation type="doi">https://dx.doi.org/10.1016/bs.aivir.2018.09.003</citation>
        <citation type="bibtex">
            @unpublished{galaxyTools,
            author = {C. Ross},
            title = {CPT Galaxy Tools},
            year = {2020-},
            note = {https://github.com/tamu-cpt/galaxy-tools/}
            }
        </citation>
    </citations>
</tool>