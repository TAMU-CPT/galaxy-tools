<?xml version="1.0"?>
<tool id="edu.tamu.cpt2.gff3.gff3_table_annotations" name="Update GFF3 from table" version="1.0">
  <description>Updates given GFF3 file with changes from the given tabular file. Requires an equivalent FASTA file as well to ensure correct reconstruction of the GFF3</description>
  <macros>
    <import>macros.xml</import>
    <import>cpt-macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <command detect_errors="aggressive"><![CDATA[
python $__tool_directory__/gff3_table_annotations.py
"$gff3In"
"$tabularIn"
"$fastaIn"
--out_gff3 "$GFF3_Out"
--out_changelog "$Changelog"
]]></command>
  <inputs>
    <param label="GFF3" name="gff3In" type="data" format="gff3"/>
    <param label="Table" name="tabularIn" type="data" format="tabular"/>
    <param label="Fasta" name="fastaIn" type="data" format="fasta"/>
  </inputs>
  <outputs>
        <data name="GFF3_Out" format="gff3" label="Gff3 Output"/>
        <data name="Changelog" format="tsv" label="Changelog"/>
  </outputs>
  <help><![CDATA[
**What it does**

Reads through a given tabular file and compares it against the given GFF3 file. If there are any differences, it updates the GFF3 file with the changes from the tabular file. The FASTA file is used to ensure correct reconstruction of the GFF3 after changes are made. Supplying an empty field in the User Defined Notes column of the table will remove all notes from the feature.

You can generate this table by hand or use the Annotation Table tool here: https://cpt.tamu.edu/galaxy/root?tool_id=edu.tamu.cpt2.phage.annotation_table

You must supply the Record ID and ID columns and may supply any of the following: 'Name', 'Feature Start' and 'Feature End' (both must be provided if one is), 'Strand', and 'Notes'.
      ]]></help>
  <expand macro="citations" />
</tool>
