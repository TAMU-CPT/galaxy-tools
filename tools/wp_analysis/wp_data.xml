<tool id="edu.tamu.cpt.wp_analysis.wp_data" name="WP Accession Data" version="1.0">
	<description>Queries NCBI to retrieve genome accessions and taxon information with WP accessions</description>
	<macros>
		<import>macros.xml</import>
	</macros>
	<expand macro="requirements">
	</expand>
	<command detect_errors="aggressive">
	<![CDATA[
	python $__tool_directory__/wp_data.py
	--email $email
	#if $acc_add.acc_selector == "acc_text":
	--wp_text "$acc_add.acc_text"
	#elif $acc_add.acc_selector == "acc_file":
	---wp_file "$acc_add.acc_file"
	#end if
    --wp_amt $wp_amt
	--out_table $out_file
	]]>]
	</command>
	<inputs>
		<param type="text" name="email" label="Email" help="Email used with Admin emails to query NCBI."/>
        <param type="select" label="WP amount" name="wp_amt">
            <option value="first">First Accession Only</option>
            <option value="all">All Accessions</option>
        </param>
		<conditional name="acc_add">
			<param name="acc_selector" type="select" label="Choose the method to submit accessions">
				<option value="acc_text" selected="false">Paste Accessions</option>
				<option value="acc_file" selected="false">Upload Accessions</option>
			</param>
			<when value="acc_text">
				<param name="acc_text" label="Accessions" optional="true" type="text" area="true" help="Past accessions separated by newline (space)"/>
			</when>
			<when value="acc_file">
				<param name="acc_file" label="Accessions File upload" optional="true" type="data" format="txt" help="File consisting of accessions separated by newline (space)"/>
			</when>
		</conditional>
	</inputs>
	<outputs>
		<data format="tabular" name="out_file" label="_return_table.txt"/>
	</outputs>
	<tests>
		<test>
			<param name="acc_add.acc_file" value="wp_accs.txt"/>
            <param name="wp_amt" value="all"/>
			<param name="email" value="curtisross@tamu.edu"/>
			<output name="out_file" value="_return_table.txt"/>
		</test>
	</tests>
	<help>
	<![CDATA[
	**What it does**
	Retrieves data about mapped proteins to a WP accession.
	INPUT: Newline separated pasted accessions OR newline separated file
	OUTPUT: Tab delimited table reporting results, such as the corresponding genomic accession, taxid, organism name, and amount of proteins mapped to that WP accession.
	]]>
	</help>
		<citations>
			<citation type="bibtex">
				@unpublished{galaxyTools,
				author = {C. Ross},
				title = {CPT Galaxy Tools},
				year = {2020-},
				note = {https://github.com/tamu-cpt/galaxy-tools/}
				}
			</citation>
		</citations>
</tool>